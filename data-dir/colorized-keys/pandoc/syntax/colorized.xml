<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd"
[
    <!ENTITY cmd "[\./a-zA-Z_-]+[0-9]*">
    <!ENTITY flag "--?[a-zA-Z0-9]+[a-zA-Z0-9-_]*">
    <!ENTITY argument "[][\./a-zA-Z0-9_-]+">
    <!ENTITY redirect "(?:!?[0-9]*>|&lt;[0-9]*!?)">
]>

<language name="Colorized Keys" section="Scripts" extensions="*.colorized" mimetype="" version="0" kateversion="5.0" author="karamellpelle@hotmail.com" license="MIT">

<highlighting>
	<list name="colorized-cmds">
		<item>gpg</item>
		<item>opensc</item>
		<item>openssl</item>
		<item>ssh-keygen</item>
		<item>ssh</item>
		<item>ykman</item>
	</list>

	<contexts>
		<context name="main" attribute="Normal Text" lineEndContext="#stay">
                        <DetectChar char="$" attribute="Prompt" context="commandline" column="0" />
                        <DetectChar char=">" attribute="Prompt" context="commandline" column="0" />
		</context>

		<context name="commandline" attribute="Command Line" lineEndContext="#pop">
			<LineContinue />
			<DetectSpaces />
			<DetectChar attribute="Comment" char="#" context="comment" />
			<keyword attribute="Colorized Cmd" String="colorized-cmds" context="cmd-arguments"/>
			<RegExpr attribute="Cmd" String="&cmd;" context="cmd-arguments" /> 
		</context>

		<context name="cmd-arguments" attribute="Normal Text" lineEndContext="#pop">
			<LineContinue />
			<DetectSpaces />
			<RegExpr attribute="Flag" String="&flag;" context="#stay" />
			<RegExpr attribute="argument"  String="&argument;" context="#stay" />
                        <RegExpr attribute="Redirect" String="&redirect;" context="file" />
                        <DetectChar attribute="Pipe" char="|" context="#pop" />
			<DetectChar attribute="Comment" char="#" context="comment" />
		</context>

		<context name="file" attribute="File" lineEndContext="#pop">
			<LineContinue />
                        <DetectSpaces />
                        <RegExpr attribute="argument" String="&argument;" context="#pop" />
		</context>

		<context name="comment" attribute="Comment" lineEndContext="#pop">
			<DetectSpaces />
			<IncludeRules context="##Alerts" />
			<DetectIdentifier />
		</context>
	</contexts>


	<itemDatas>
		<itemData name="Normal Text" defStyleNum="dsError" />
		<itemData name="Comment" defStyleNum="dsComment" />
		<itemData name="Prompt" defStyleNum="dsPreprocessor" />
		<itemData name="Command Line" defStyleNum="dsNormal" />
		<itemData name="Colorized Cmd" defStyleNum="dsKeyword" bold="true" />
		<itemData name="Cmd" defStyleNum="dsFunction" />
		<itemData name="Flag" defStyleNum="dsExtension" />
		<itemData name="argument" defStyleNum="dsNormal" />
		<itemData name="File" defStyleNum="dsNormal" />
		<itemData name="Redirect" defStyleNum="dsOperator" />
		<itemData name="Pipe" defStyleNum="dsOperator" />
	</itemDatas>
</highlighting>


<general>
	<comments>
		<comment name="singleLine" start="#" />
	</comments>
        <keywords casesensitive="true" weakDeliminator=".-_" />

</general>

</language>

